# Agent Prompt — Static Photography Portfolio Site

## Task

Build a static photography portfolio website from scratch. The site has no backend and no
build framework. Photos live in folders; each subfolder becomes a collection page. The
manifest that drives the site is generated by a Node.js script and deployed via GitHub
Actions to GitHub Pages.

Implement every file listed in the folder structure below. Do not skip any file. When you
are done, the site must be fully functional locally (`npm run dev`) and deploy automatically
on every push to `main`.

---

## Visual Design Requirements

- **Style:** Minimal editorial — white backgrounds, generous whitespace, no decorative
  elements.
- **Fonts:** Load from Google Fonts — **Playfair Display** (serif) for logo and headings,
  **Jost** (geometric sans-serif) for navigation and body text.
- **Homepage (`index.html`):** CSS flexbox cover grid.
  - 3 columns on desktop, 2 on tablet, 1 on mobile.
  - Each card shows: cover image, collection title, year.
  - Cards link to `collection.html?slug=[slug]`.
- **Collection page (`collection.html`):** Justified flex photo grid.
  - Each photo item must have `flex-grow: [width/height]` and
    `padding-bottom: [height/width * 100%]` so rows fill the full width at correct
    aspect ratios.
  - Page header: collection title and year.
  - "You may also like" section at the bottom: up to 4 randomly chosen other collections
    using the same cover card structure as the homepage.
- **Lightbox:** Use **PhotoSwipe v5** (load from CDN). White background (`#fff`, 0.95
  opacity). Include prev/next/close controls. Wire it up so clicking any photo in the
  justified grid opens the lightbox at the correct index.

---

## Technical Constraints

| Concern | Decision |
|---|---|
| Page generation | `manifest.json` + vanilla JS — no React, Vue, or any framework |
| Manifest script | `generate-manifest.js` — Node.js, runs with `node generate-manifest.js` |
| Image dimensions | Use the `image-size` npm package (pure JS, no native compilation) |
| Lightbox | PhotoSwipe v5 via CDN |
| `manifest.json` | **Never committed** — generated by CI only; add to `.gitignore` |
| Routing | `collection.html?slug=` query param — no redirect rules needed |
| Hosting | GitHub Pages via GitHub Actions |
| Node version | 22 (use `actions/setup-node@v4` with `node-version: 22`) |

---

## Required Folder Structure

Create exactly this structure (replace `[your-name]` with the site owner's name):

```
portfolio/
  src/
    photos/
      example-collection/
        meta.json          <- see meta.json spec below
        cover.jpg          <- placeholder or real image
        01.jpg
    css/
      style.css
    js/
      main.js
    index.html
    collection.html
  generate-manifest.js
  package.json             <- scripts: dev, build; dependency: image-size
  .gitignore               <- must exclude: node_modules/, manifest.json
  serve.json               <- local dev server config (see below)
  .github/
    workflows/
      deploy.yml
```

---

## manifest.json Schema (generated, never committed)

`generate-manifest.js` must write `src/manifest.json` with this shape:

```json
{
  "site": {
    "title": "[your-name]"
  },
  "collections": [
    {
      "slug": "example-collection",
      "title": "Example Collection",
      "year": 2026,
      "cover": "photos/example-collection/cover.jpg",
      "photos": [
        { "src": "photos/example-collection/01.jpg", "width": 1920, "height": 1279 }
      ]
    }
  ]
}
```

- Sort collections by `order` (ascending) then by `year` (descending) as fallback.
- `width` and `height` are required for the justified grid and PhotoSwipe. Read them with
  the `image-size` package.

---

## meta.json Fields

Place a `meta.json` in each collection folder:

```json
{
  "title": "My Collection",
  "year": 2026,
  "order": 1
}
```

| Field | Type | Required | Default |
|---|---|---|---|
| `title` | string | No | Prettified folder name (hyphens -> spaces, title-cased) |
| `year` | number | No | Current year |
| `order` | number | No | Omitted collections sort after those with an explicit order |

---

## serve.json (local dev server)

Use [`serve`](https://github.com/vercel/serve) as the local dev server. Configure
`serve.json` to serve the `src/` folder:

```json
{
  "public": "src"
}
```

Add to `package.json` scripts:

```json
{
  "scripts": {
    "dev": "node generate-manifest.js && serve",
    "build": "node generate-manifest.js"
  },
  "dependencies": {
    "image-size": "^2.0.0"
  },
  "devDependencies": {
    "serve": "^14.0.0"
  }
}
```

---

## GitHub Actions Workflow (deploy.yml)

On every push to `main`, the workflow must:

1. Checkout the repository.
2. Set up Node 22 (use `actions/setup-node@v4`).
3. Run `npm ci`.
4. Run `npm run build` to generate `src/manifest.json`.
5. Upload `src/` as a GitHub Pages artifact (use `actions/upload-pages-artifact@v3`).
6. Deploy to GitHub Pages (use `actions/deploy-pages@v4`).

Configure the workflow with the `pages` and `id-token: write` permissions required by the
official Pages deployment actions.

---

## Local Development

After implementing all files, verify the following commands work:

```bash
# Install dependencies
npm install

# Start local dev server (generates manifest + opens http://localhost:3000)
npm run dev
```

---

## Workflow: Adding a New Collection (document in README.md)

1. Create `src/photos/[slug]/` with photo files and a `meta.json`.
2. Name one photo `cover.jpg` — it will appear as the homepage card image.
3. Run `npm run dev` to preview locally.
4. Push to `main` — GitHub Actions regenerates the manifest and redeploys automatically.

---

## Acceptance Criteria

- [ ] `npm run dev` serves the site at `http://localhost:3000` with no errors.
- [ ] Homepage shows all collections as cover cards in a responsive grid.
- [ ] Collection page renders a justified photo grid matching native aspect ratios.
- [ ] Clicking a photo opens PhotoSwipe lightbox; prev/next/close work.
- [ ] "You may also like" shows up to 4 other collections at the bottom.
- [ ] `manifest.json` is listed in `.gitignore` and absent from the repository.
- [ ] Pushing to `main` triggers the GitHub Actions workflow and deploys to GitHub Pages.
